"use strict";(self.webpackChunkwebsite_docs=self.webpackChunkwebsite_docs||[]).push([[9023],{715:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>d});var s=i(4848),a=i(8453);const t={id:"install-crd",title:"Installing chaincodes with the FabricChaincodeInstall CRD"},c="FabricChaincodeInstall CRD Documentation",l={id:"chaincode-deployment/install-crd",title:"Installing chaincodes with the FabricChaincodeInstall CRD",description:"Certainly! I'll provide you with the complete, revised documentation page that incorporates all the information and improvements we've discussed. This will be in a format you can easily copy and paste.",source:"@site/docs/chaincode-deployment/install-crd.md",sourceDirName:"chaincode-deployment",slug:"/chaincode-deployment/install-crd",permalink:"/bevel-operator-fabric/docs/chaincode-deployment/install-crd",draft:!1,unlisted:!1,editUrl:"https://github.com/hyperledger-bevel/bevel-operator-fabric/edit/master/website/docs/chaincode-deployment/install-crd.md",tags:[],version:"current",frontMatter:{id:"install-crd",title:"Installing chaincodes with the FabricChaincodeInstall CRD"},sidebar:"mainSidebar",previous:{title:"Kubernetes chaincode builder",permalink:"/bevel-operator-fabric/docs/chaincode-deployment/k8s-builder"},next:{title:"Getting started",permalink:"/bevel-operator-fabric/docs/channel-management/getting-started"}},r={},d=[{value:"Overview",id:"overview",level:2},{value:"Specification",id:"specification",level:2},{value:"API Version and Kind",id:"api-version-and-kind",level:3},{value:"Metadata",id:"metadata",level:3},{value:"Spec",id:"spec",level:3},{value:"Peers",id:"peers",level:4},{value:"External Peers",id:"external-peers",level:4},{value:"MSP ID",id:"msp-id",level:4},{value:"HLF Identity",id:"hlf-identity",level:4},{value:"Chaincode Package",id:"chaincode-package",level:4},{value:"Example Usage",id:"example-usage",level:2},{value:"Installation Process",id:"installation-process",level:2},{value:"Notes",id:"notes",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Certainly! I'll provide you with the complete, revised documentation page that incorporates all the information and improvements we've discussed. This will be in a format you can easily copy and paste."}),"\n",(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"fabricchaincodeinstall-crd-documentation",children:"FabricChaincodeInstall CRD Documentation"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"FabricChaincodeInstall"})," Custom Resource Definition (CRD) is used in the bevel-operator-fabric to install chaincodes on specific peers of an organization in a Hyperledger Fabric network. This CRD allows for fine-grained control over chaincode installation, specifying which peers should have the chaincode installed and the details of the chaincode package."]}),"\n",(0,s.jsx)(n.h2,{id:"specification",children:"Specification"}),"\n",(0,s.jsx)(n.h3,{id:"api-version-and-kind",children:"API Version and Kind"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: hlf.kungfusoftware.es/v1alpha1\nkind: FabricChaincodeInstall\n"})}),"\n",(0,s.jsx)(n.h3,{id:"metadata",children:"Metadata"}),"\n",(0,s.jsx)(n.p,{children:"The metadata section includes standard Kubernetes object metadata:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"}),": A unique name for the FabricChaincodeInstall resource"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"namespace"}),": The Kubernetes namespace where the resource is created"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"spec",children:"Spec"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"spec"})," section defines the desired state of the FabricChaincodeInstall resource:"]}),"\n",(0,s.jsx)(n.h4,{id:"peers",children:"Peers"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"peers"}),": A list of peers where the chaincode should be installed","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"}),": The name of the peer"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"namespace"}),": The namespace where the peer is deployed"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"external-peers",children:"External Peers"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"externalPeers"}),": A list of external peers (if any) where the chaincode should be installed"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"msp-id",children:"MSP ID"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"mspID"}),": The Membership Service Provider ID of the organization"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"hlf-identity",children:"HLF Identity"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"hlfIdentity"}),": Specifies the identity used for chaincode installation","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"secretName"}),": Name of the Kubernetes secret containing the identity"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"secretNamespace"}),": Namespace of the secret"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"secretKey"}),": Key in the secret that contains the identity information"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"chaincode-package",children:"Chaincode Package"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"chaincodePackage"}),": Details of the chaincode to be installed","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"}),": Name of the chaincode"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"address"}),": Address where the chaincode is hosted"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"type"}),": Type of the chaincode (e.g., 'ccaas' for Chaincode as a Service)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dialTimeout"}),": Timeout for dialing the chaincode address"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"tls"}),": TLS configuration for the chaincode","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"required"}),": Boolean indicating if TLS is required"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"example-usage",children:"Example Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# FabricChaincodeInstall CRD Example with Field Descriptions\n\n# API version of the CRD\napiVersion: hlf.kungfusoftware.es/v1alpha1\n# Kind specifies that this is a FabricChaincodeInstall resource\nkind: FabricChaincodeInstall\nmetadata:\n  # Name of this FabricChaincodeInstall resource\n  name: example-chaincode\n  # Namespace where this resource will be created\n  namespace: default\nspec:\n  # List of peers where the chaincode should be installed\n  peers:\n    # Each item in the list represents a peer\n    - name: org1-peer0  # Name of the peer\n      namespace: default  # Namespace where the peer is deployed\n  # List of external peers (if any) where the chaincode should be installed\n  # This is empty in this example\n  externalPeers: []\n  # Membership Service Provider ID of the organization\n  mspID: Org1MSP\n  # Identity used for chaincode installation\n  hlfIdentity:\n    # Name of the Kubernetes secret containing the identity\n    secretName: org1-admin\n    # Namespace where the secret is located\n    secretNamespace: default\n    # Key in the secret that contains the identity information\n    secretKey: user.yaml\n  # Details of the chaincode package to be installed\n  chaincodePackage:\n    # Name of the chaincode\n    name: test\n    # Address where the chaincode is hosted\n    # Format: <service-name>.<namespace>:<port>\n    address: 'example-chaincode.default:9999'\n    # Type of the chaincode (e.g., 'ccaas' for Chaincode as a Service)\n    type: 'ccaas'\n    # Timeout for dialing the chaincode address\n    dialTimeout: \"10s\"\n    # TLS configuration for the chaincode\n    tls:\n      # Boolean indicating if TLS is required\n      required: false\n"})}),"\n",(0,s.jsx)(n.h2,{id:"installation-process",children:"Installation Process"}),"\n",(0,s.jsx)(n.p,{children:"When applying this CRD, the bevel-operator-fabric will perform the following steps:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Validate the CRD specification"}),"\n",(0,s.jsx)(n.li,{children:"Locate the specified peers within the cluster"}),"\n",(0,s.jsx)(n.li,{children:"Retrieve the HLF identity from the specified Kubernetes secret"}),"\n",(0,s.jsx)(n.li,{children:"Prepare the chaincode package based on the provided details"}),"\n",(0,s.jsx)(n.li,{children:"Connect to each specified peer"}),"\n",(0,s.jsx)(n.li,{children:"Install the chaincode package on each peer"}),"\n",(0,s.jsx)(n.li,{children:"Verify successful installation"}),"\n",(0,s.jsx)(n.li,{children:"Update the status of the FabricChaincodeInstall resource"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ensure that the specified peers are operational and accessible within the cluster"}),"\n",(0,s.jsx)(n.li,{children:"The HLF identity used must have sufficient permissions to install chaincodes"}),"\n",(0,s.jsx)(n.li,{children:"For external peers, additional configuration may be required to ensure connectivity"}),"\n",(0,s.jsx)(n.li,{children:"The chaincode package must be available at the specified address before applying this CRD"}),"\n",(0,s.jsxs)(n.li,{children:["Adjust the ",(0,s.jsx)(n.code,{children:"dialTimeout"})," as needed based on your network conditions"]}),"\n",(0,s.jsx)(n.li,{children:"Configure TLS settings appropriately for your environment"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.p,{children:"If the chaincode installation fails, check the following:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Peer accessibility and health"}),"\n",(0,s.jsx)(n.li,{children:"Correct MSP ID"}),"\n",(0,s.jsx)(n.li,{children:"Valid HLF identity and permissions"}),"\n",(0,s.jsx)(n.li,{children:"Chaincode package availability and correctness"}),"\n",(0,s.jsx)(n.li,{children:"Network connectivity to the chaincode address"}),"\n",(0,s.jsx)(n.li,{children:"TLS configuration (if applicable)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Consult the bevel-operator-fabric logs for detailed error messages and installation status."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>l});var s=i(6540);const a={},t=s.createContext(a);function c(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);